<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Stone Clicker Game Kai</title>
    <style>
        body {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            min-height: 100vh; /* ç”»é¢å…¨ä½“ã«åºƒãŒã‚‹ã‚ˆã†ã« */
            margin: 0;
            background-color: #f0f0f0;
            font-family: sans-serif;
            text-align: center; /* ãƒ†ã‚­ã‚¹ãƒˆã‚’ä¸­å¤®æƒãˆã« */
            padding: 20px; /* ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ãŒç«¯ã«ãã£ã¤ã‹ãªã„ã‚ˆã†ã« */
            box-sizing: border-box; /* paddingã‚’å«ã‚ã¦å¹…è¨ˆç®— */
        }
        #instruction {
            font-size: 1.5em;
            margin-bottom: 10px;
        }
        #clickCountParagraph {
            font-size: 1.2em;
            margin-bottom: 20px;
        }
        #stoneImage {
            cursor: pointer;
            width: 150px; /* å°‘ã—å°ã•ãã—ã¦ä»–ã®è¦ç´ ã¨ã®ãƒãƒ©ãƒ³ã‚¹ã‚’ã¨ã‚‹ */
            max-width: 80%; /* ç”»é¢å¹…ãŒå°ã•ã„å ´åˆã§ã‚‚ã¯ã¿å‡ºã•ãªã„ã‚ˆã†ã« */
            height: auto;
            border: 2px solid black;
            border-radius: 10px;
            margin-bottom: 20px; /* ç”»åƒã¨å‹•ç”»ã®é–“ã«ã‚¹ãƒšãƒ¼ã‚¹ */
        }
        #myVideo {
            display: none; /* Hide video initially */
            width: 90%;
            max-width: 640px;
            margin-top: 10px; /* ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼ã‚„ç”»åƒã‹ã‚‰ã®ãƒãƒ¼ã‚¸ãƒ³ */
        }
    </style>
</head>
<body>

    <p id="instruction">ç ”ä¸€ã‚’100å›ã‚¿ãƒƒãƒ—ã—ã¦ï¼</p>
    <p id="clickCountParagraph">ç¾åœ¨ã®ã‚«ã‚¦ãƒ³ãƒˆ: <span id="clickCountDisplay">0</span> / 100</p>

    <img src="stone.png" id="stoneImage" alt="Click the Stone!">

    <video id="myVideo" controls>
        <source src="D4372235-B49A-41E0-B864-C3957B4F8A9E.mp4" type="video/mp4">
        Your browser does not support the video tag.
    </video>

    <script>
        const stoneImage = document.getElementById('stoneImage');
        const videoPlayer = document.getElementById('myVideo');
        const clickCountDisplay = document.getElementById('clickCountDisplay');
        const instructionText = document.getElementById('instruction'); // æŒ‡ç¤ºãƒ†ã‚­ã‚¹ãƒˆã‚‚å¤‰æ›´ã§ãã‚‹ã‚ˆã†ã«å–å¾—

        let clicks = 0;
        const clicksForVideo = 50;
        const totalClicksGoal = 100;
        let videoHasPlayed = false; // å‹•ç”»ãŒå†ç”Ÿã•ã‚ŒãŸã‹ã©ã†ã‹ã‚’è¿½è·¡ã™ã‚‹ãƒ•ãƒ©ã‚°

        stoneImage.addEventListener('click', function() {
            if (clicks < totalClicksGoal) { // 100å›ã¾ã§ã¯ã‚«ã‚¦ãƒ³ãƒˆã‚’å¢—ã‚„ã™
                clicks++;
                clickCountDisplay.textContent = clicks;
            }

            // 50å›ã«é”ã—ã€ã‹ã¤å‹•ç”»ãŒã¾ã å†ç”Ÿã•ã‚Œã¦ã„ãªã„å ´åˆ
            if (clicks >= clicksForVideo && !videoHasPlayed) {
                console.log("50 Clicks reached! Playing video.");
                videoPlayer.style.display = 'block'; // å‹•ç”»ã‚’è¡¨ç¤º
                videoPlayer.volume = 1.0;           // éŸ³é‡ã‚’æœ€å¤§ã«
                videoPlayer.play()
                    .then(() => {
                        console.log("Video started playing.");
                        instructionText.textContent = "ç›®æ¨™ã®åŠåˆ†é”æˆï¼å‹•ç”»å†ç”Ÿï¼ (ç¶šã‘ã¦100å›ã‚’ç›®æŒ‡ãã†ï¼)";
                    })
                    .catch(error => {
                        console.error("Error attempting to play video:", error);
                        instructionText.textContent = "å‹•ç”»ã®å†ç”Ÿã«å¤±æ•—ã—ã¾ã—ãŸã€‚ãƒ–ãƒ©ã‚¦ã‚¶ã®è¨­å®šã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚";
                    });
                videoHasPlayed = true; // å‹•ç”»ãŒå†ç”Ÿã•ã‚ŒãŸã“ã¨ã‚’è¨˜éŒ²
            }

            // 100å›ã«é”ã—ãŸå ´åˆã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸
            if (clicks >= totalClicksGoal) {
                if (videoHasPlayed) { // å‹•ç”»å†ç”Ÿå¾Œã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸
                    instructionText.textContent = "100å›é”æˆï¼ãŠã‚ã§ã¨ã†ã”ã–ã„ã¾ã™ï¼ğŸ‰";
                } else { // (ä¸‡ãŒä¸€50å›ã§å‹•ç”»å†ç”Ÿã•ã‚Œãªã‹ã£ãŸå ´åˆã®ä¿é™º)
                    instructionText.textContent = "100å›é”æˆï¼ (å‹•ç”»ã¯50å›ã§å†ç”Ÿã®ã¯ãšã§ã—ãŸ)";
                }
                // 100å›è¶…ãˆãŸã‚‰çŸ³ã®ã‚¯ãƒªãƒƒã‚¯ã‚’ç„¡åŠ¹ã«ã™ã‚‹å ´åˆ (ã‚ªãƒ—ã‚·ãƒ§ãƒ³)
                // stoneImage.style.pointerEvents = 'none';
                // stoneImage.style.opacity = '0.5'; // è¦‹ãŸç›®ã‚‚å¤‰ãˆã‚‹ãªã©
            }
        });
    </script>

</body>
</html>
